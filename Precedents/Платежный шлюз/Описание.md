# Прецедент: Платежный шлюз

**Основной исполнитель**: Клиент

**Заинтересованные лица**:
- **Клиент**: Инициирует платеж, выбирает способ оплаты и получает уведомление о статусе платежа.
- **Платежный шлюз**: Обрабатывает платежи, проверяет наличие товара на складе и передает информацию о результате.
- **Бухгалтерия**: Обновляет данные о платеже и статусе заказа.
- **Техподдержка**: Обрабатывает запросы клиента в случае ошибок или проблем с платежом.

**Предусловия**:  
Клиент готов к оплате и выбрал товар.

**Результат (Постусловие)**:
- Платеж успешно проведен или отклонен.
- Информация о платеже обновлена в бухгалтерии.
- Клиент получает уведомление о статусе платежа.

## Основной сценарий:

### 1. Инициирование платежа:
- **Клиент** выбирает товар и инициирует платеж через **Платежный шлюз**.
- **Платежный шлюз** проверяет наличие товара на складе, обращаясь к **Warehouse**.
- **Warehouse** подтверждает наличие товара и передает информацию обратно в **Платежный шлюз**.
- **Платежный шлюз** подтверждает успешную транзакцию.

### 2. Подтверждение платежа:
- **Клиент** получает уведомление о подтверждении успешного платежа.
- **Платежный шлюз** обновляет информацию о платеже в **Бухгалтерии**.

## Альтернативные сценарии:
- **Товар недоступен**: Если товара нет на складе, **Платежный шлюз** уведомляет клиента о недоступности товара и предлагает альтернативные варианты (например, отмену покупки или выбор другого товара).
- **Проблемы с платежом**: Если транзакция отклонена (например, из-за недостатка средств на счете или ошибки в данных), **Платежный шлюз** уведомляет клиента об ошибке. Клиент может попробовать другой способ оплаты или обратиться в **Техподдержку** для разрешения проблемы.
- **Ошибка в процессе платежа**: В случае технических сбоев, **Платежный шлюз** сообщает о проблемах, а **Техподдержка** предоставляет помощь для разрешения ситуации.